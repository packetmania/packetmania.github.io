<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.2">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="piAnQ_mnwkhV_qh4_Se1yLzM1IwOvuq-vmYfXBkWRXU">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=EB+Garamond:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.packetmania.net","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk | utterances","storage":true,"lazyload":false,"nav":{"utterances":{"text":"Utterancesè¯„è®º","order":-1},"gitalk":{"text":"Gitalkè¯„è®º","order":-2}}},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="ä¸€ç›´å°±æƒ³å»ºä¸€ä¸ªç½‘é¡µè¿½è¸ªæœ¬åšå®¢å‘å¸ƒæ–‡ç« çš„æµè§ˆé‡ã€‚æœ€è¿‘ï¼Œå€ŸåŠ© AIï¼ˆChatGPTï¼‰è¾…åŠ©ç”Ÿæˆäº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«ç¨‹åºï¼Œå¯ä»¥å‡†ç¡®åœ°æŠ“å–å…¨éƒ¨æ–‡ç« çš„æµè§ˆé‡å¹¶è‡ªåŠ¨åˆ›å»ºMarkdownæ ¼å¼çš„æ’è¡Œæ¦œã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="AIè¾…åŠ©ç”Ÿæˆçš„ç»Ÿè®¡åšå®¢æ–‡ç« æµè§ˆé‡çš„ç½‘ç»œçˆ¬è™«">
<meta property="og:url" content="https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/index.html">
<meta property="og:site_name" content="ç½‘ç»œçƒ­åº¦">
<meta property="og:description" content="ä¸€ç›´å°±æƒ³å»ºä¸€ä¸ªç½‘é¡µè¿½è¸ªæœ¬åšå®¢å‘å¸ƒæ–‡ç« çš„æµè§ˆé‡ã€‚æœ€è¿‘ï¼Œå€ŸåŠ© AIï¼ˆChatGPTï¼‰è¾…åŠ©ç”Ÿæˆäº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«ç¨‹åºï¼Œå¯ä»¥å‡†ç¡®åœ°æŠ“å–å…¨éƒ¨æ–‡ç« çš„æµè§ˆé‡å¹¶è‡ªåŠ¨åˆ›å»ºMarkdownæ ¼å¼çš„æ’è¡Œæ¦œã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-05-05T06:08:54.000Z">
<meta property="article:modified_time" content="2025-05-17T02:11:37.793Z">
<meta property="article:author" content="å­æ›¦">
<meta property="article:tag" content="Pythonç¼–ç¨‹">
<meta property="article:tag" content="äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ ">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/","path":"2025/05/04/Web-Crawler-Viewcounts/","title":"AIè¾…åŠ©ç”Ÿæˆçš„ç»Ÿè®¡åšå®¢æ–‡ç« æµè§ˆé‡çš„ç½‘ç»œçˆ¬è™«"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>AIè¾…åŠ©ç”Ÿæˆçš„ç»Ÿè®¡åšå®¢æ–‡ç« æµè§ˆé‡çš„ç½‘ç»œçˆ¬è™« | ç½‘ç»œçƒ­åº¦</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9YKBP0QK7Z"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-9YKBP0QK7Z","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="ç½‘ç»œçƒ­åº¦" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ç½‘ç»œçƒ­åº¦</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">æŠ€æœ¯ æ–°çŸ¥ å…±äº«</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
        <li class="menu-item menu-item-tasks"><a href="/VXlzTWJvcVNzcmRzdkNnaG0/" rel="section"><i class="fa fa-tasks fa-fw"></i>ä»»åŠ¡</a></li>
        <li class="menu-item menu-item-ranking"><a href="/ranking/" rel="section"><i class="fa fa-list-ol fa-fw"></i>æ’è¡Œæ¦œ</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>ç«™ç‚¹åœ°å›¾</a></li>
        <li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
        <li class="menu-item menu-item-language"><a href="https://www.packetmania.net/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB"><span class="nav-number">1.</span> <span class="nav-text">ç”Ÿæˆç½‘ç»œçˆ¬è™«</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAcan-you-write-a-crawler-to-get-view-counts-for-the-posts-of-this-blog-site-www.packetmania.net"><span class="nav-number">1.1.</span> <span class="nav-text">æç¤ºï¼šCan you write a crawler to get view counts for the posts of this blog site: www.packetmania.net</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAplease-write-a-crawler-for-me."><span class="nav-number">1.2.</span> <span class="nav-text">æç¤ºï¼šPlease write a crawler for me.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAyes"><span class="nav-number">1.3.</span> <span class="nav-text">æç¤ºï¼šYes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAboth-python-scripts-returned-found-0-posts..-something-wrong."><span class="nav-number">1.4.</span> <span class="nav-text">æç¤ºï¼šBoth python scripts returned &quot;Found 0 posts.&quot;. Something wrong.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAit-does-return-sitemap-content"><span class="nav-number">1.5.</span> <span class="nav-text">æç¤ºï¼šIt does return sitemap content:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%93%E5%8F%96%E9%98%85%E8%AF%BB%E6%AC%A1%E6%95%B0"><span class="nav-number">2.</span> <span class="nav-text">æŠ“å–é˜…è¯»æ¬¡æ•°</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAnow-it-can-find-the-pages-but-the-view-count-still-missing"><span class="nav-number">2.1.</span> <span class="nav-text">æç¤ºï¼šNow it can find the pages, but the view count still missing:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAactually-the-view-count-is-shown-as-%E9%98%85%E8%AF%BB%E6%AC%A1%E6%95%B0-1448"><span class="nav-number">2.2.</span> <span class="nav-text">æç¤ºï¼šActually the view count is shown as &quot;é˜…è¯»æ¬¡æ•°ï¼š 1448&quot;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAstill-not-found"><span class="nav-number">2.3.</span> <span class="nav-text">æç¤ºï¼šStill not found</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAhere-is-the-output"><span class="nav-number">2.4.</span> <span class="nav-text">æç¤ºï¼šHere is the output:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAnow-it-works"><span class="nav-number">2.5.</span> <span class="nav-text">æç¤ºï¼šNow it works:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E7%AB%A0%E6%8E%92%E8%A1%8C%E6%A6%9C"><span class="nav-number">3.</span> <span class="nav-text">åˆ›å»ºæ–‡ç« æ’è¡Œæ¦œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98markdown"><span class="nav-number">4.</span> <span class="nav-text">ä¿å­˜Markdown</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E5%8F%8C%E8%AF%AD%E5%8D%9A%E5%AE%A2"><span class="nav-number">5.</span> <span class="nav-text">æ”¯æŒåŒè¯­åšå®¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">6.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å­æ›¦"
      src="/images/ccie.gif">
  <p class="site-author-name" itemprop="name">å­æ›¦</p>
  <div class="site-description" itemprop="description">è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯åŠè½¯ä»¶è®¾è®¡ä¸å®ç°</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/packetmania" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;packetmania" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zixiruoxue@gmail.com" title="E-Mail â†’ mailto:zixiruoxue@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/zixisean" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;zixisean" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/15140531" title="StackOverflow â†’ https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;15140531" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_nd.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.packetmania.net/" title="https:&#x2F;&#x2F;blog.packetmania.net" rel="noopener" target="_blank">ä¸­å›½ç«™ï¼ˆé¦™æ¸¯ï¼‰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.packetmania.net/" title="https:&#x2F;&#x2F;www.packetmania.net">å›½é™…ç«™ï¼ˆç¾å›½ï¼‰</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ccie.gif">
      <meta itemprop="name" content="å­æ›¦">
      <meta itemprop="description" content="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯åŠè½¯ä»¶è®¾è®¡ä¸å®ç°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç½‘ç»œçƒ­åº¦">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AIè¾…åŠ©ç”Ÿæˆçš„ç»Ÿè®¡åšå®¢æ–‡ç« æµè§ˆé‡çš„ç½‘ç»œçˆ¬è™«
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-05-04 23:08:54" itemprop="dateCreated datePublished" datetime="2025-05-04T23:08:54-07:00">2025-05-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-05-16 19:11:37" itemprop="dateModified" datetime="2025-05-16T19:11:37-07:00">2025-05-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%9C%AD/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯å°æœ­</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>22k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>20 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>ä¸€ç›´å°±æƒ³å»ºä¸€ä¸ªç½‘é¡µè¿½è¸ªæœ¬åšå®¢å‘å¸ƒæ–‡ç« çš„æµè§ˆé‡ã€‚æœ€è¿‘ï¼Œå€ŸåŠ© AIï¼ˆChatGPTï¼‰è¾…åŠ©ç”Ÿæˆäº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«ç¨‹åºï¼Œå¯ä»¥å‡†ç¡®åœ°æŠ“å–å…¨éƒ¨æ–‡ç« çš„æµè§ˆé‡å¹¶è‡ªåŠ¨åˆ›å»ºMarkdownæ ¼å¼çš„æ’è¡Œæ¦œã€‚<span id="more"></span>æ•´ä¸ªè¿‡ç¨‹å¤§çº¦1ä¸ªå¤šå°æ—¶ï¼Œä¼°è®¡è‡ªå·±ä»å¤´å¼€å§‹å†™è‡³å°‘éœ€è¦2-3å°æ—¶çš„æ—¶é—´ï¼Œç¡®å®AIå°†æ•ˆç‡å€å¢ã€‚è¿™é‡Œå°†ä¸AIäº¤äº’ç”Ÿæˆä»£ç çš„å…³é”®æç¤ºå’Œå›åº”è¿‡ç¨‹åšä¸ªè®°å½•ï¼Œä»¥å¤‡å‚è€ƒã€‚</p>
<h3 id="ç”Ÿæˆç½‘ç»œçˆ¬è™«">ç”Ÿæˆç½‘ç»œçˆ¬è™«</h3>
<div class="note info no-icon"><h4 id="æç¤ºcan-you-write-a-crawler-to-get-view-counts-for-the-posts-of-this-blog-site-www.packetmania.net"><strong>æç¤ºï¼š</strong>Can you write a crawler to get view counts for the posts of this blog site: www.packetmania.net</h4>
<p><strong>å›åº”ï¼š</strong>To retrieve the view counts for posts on www.packetmania.net, you can develop a web crawler that performs the following steps:â€‹</p>
<ol type="1">
<li><p><strong>Access the Sitemap: </strong>Begin by fetching the site's sitemap, located at https://www.packetmania.net/sitemap.xml. This XML file lists all the URLs of the site's posts, facilitating efficient crawling.</p></li>
<li><p><strong>Parse the Sitemap: </strong>Extract all post URLs from the <loc> tags within the sitemap.â€‹</p></li>
<li><p><strong>Fetch Each Post: </strong>For each URL obtained, send an HTTP GET request to retrieve the HTML content of the post.â€‹</p></li>
<li><p><strong>Extract View Counts: </strong>Analyze the HTML content to locate the view count. On PacketMania, the view count is typically found near the post's metadata. For example, in the post titled "IPv4 and IPv6 Header Checksum Algorithm Explained," the view count is displayed as follows: <code>Views: 78</code></p>
<p>Your crawler should search for this pattern or similar indicators within the HTML to extract the view count.</p></li>
<li><p><strong>Handle JavaScript Rendering: </strong>If the view counts are loaded dynamically via JavaScript, consider using tools like Selenium or Puppeteer, which can render JavaScript and allow you to extract the dynamically loaded content.â€‹</p></li>
<li><p><strong>Respect Robots.txt and Terms of Service: </strong>Before initiating the crawling process, review the site's robots.txt file and terms of service to ensure compliance with their crawling policies.â€‹</p></li>
<li><p><strong>Implement Rate Limiting: </strong>To avoid overwhelming the server, incorporate delays between your requests.â€‹</p></li>
</ol>
<p>By following these steps, your crawler can systematically retrieve view counts for each post on PacketMania.</p>
</div>
<p>ChatGPT é©¬ä¸Šç»™å‡ºäº†ç½‘ç»œçˆ¬è™«çš„å·¥ä½œæµç¨‹ï¼Œè¿˜æé†’è¦å®ç°é€Ÿç‡é™åˆ¶ï¼ŒæŒºå¥½ï¼ä¸åºŸè¯äº†ï¼Œç›´æ¥è®©å®ƒå†™ä»£ç å§ã€‚</p>
<div class="note info no-icon"><h4 id="æç¤ºplease-write-a-crawler-for-me."><strong>æç¤ºï¼š</strong>Please write a crawler for me.</h4>
<p><strong>å›åº”ï¼š</strong>Hereâ€™s a Python crawler using requests, BeautifulSoup, and re to extract view counts from blog posts on www.packetmania.net. This version assumes the view counts are rendered as plain text and not dynamically via JavaScript.</p>
<p>âœ… <strong>Requirements</strong> Install required packages first (if not already installed):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests beautifulsoup4 lxml</span><br></pre></td></tr></table></figure>
<p>ğŸ•·ï¸ <strong>Crawler Code</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 1: Fetch sitemap</span></span><br><span class="line">SITEMAP_URL = <span class="string">&quot;https://www.packetmania.net/sitemap.xml&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_post_urls</span>(<span class="params">sitemap_url</span>):</span></span><br><span class="line">    response = requests.get(sitemap_url, headers=headers)</span><br><span class="line">    soup = BeautifulSoup(response.content, <span class="string">&#x27;xml&#x27;</span>)</span><br><span class="line">    urls = [loc.text <span class="keyword">for</span> loc <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;loc&#x27;</span>) <span class="keyword">if</span> <span class="string">&#x27;/en/&#x27;</span> <span class="keyword">in</span> loc.text]</span><br><span class="line">    <span class="keyword">return</span> urls</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Step 2: Crawl each post and extract view count</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_view_count</span>(<span class="params">post_url</span>):</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Step 3: Main function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_packetmania</span>():</span></span><br><span class="line">    post_urls = get_post_urls(SITEMAP_URL)</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">for</span> i, url <span class="keyword">in</span> <span class="built_in">enumerate</span>(post_urls):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(post_urls)&#125;</span>] Crawling <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">        views = extract_view_count(url)</span><br><span class="line">        ...</span><br><span class="line">        time.sleep(<span class="number">1</span>)  <span class="comment"># be polite </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    view_data = crawl_packetmania()</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>âš ï¸ <strong>Notes</strong></p>
<ul>
<li>If view counts are rendered via JavaScript, youâ€™ll need to use <strong>Selenium</strong> or <strong>Playwright</strong>.</li>
<li>Respect robots.txt: https://www.packetmania.net/robots.txt</li>
<li>Add error handling and throttling for production use.</li>
</ul>
<p>Would you like a JavaScript-rendered version using Selenium as well?</p>
</div>
<p>ChatGPT è¾“å‡ºçš„å¼€å¤´è´´å¿ƒåœ°ç»™å‡ºäº†å®‰è£…æ‰€éœ€ Python æ¨¡å—çš„å‘½ä»¤è¡Œã€‚æ¥ä¸‹æ¥ç”Ÿæˆçš„ç¨‹åºç»“æ„å¾ˆæ¸…æ™°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°<code>get_post_urls</code>åˆ†æè¾“å…¥çš„ç«™ç‚¹åœ°å›¾ï¼Œè¿”å›å…¨éƒ¨æ–‡ç« çš„ URLã€‚ç¬¬äºŒä¸ªå‡½æ•°<code>extract_view_count</code>ä»æ¯ä¸ªæ–‡ç« ä¸­æŠ“å–é˜…è¯»æ¬¡æ•°ã€‚æœ€åç”±<code>crawl_packetmania</code>å‡½æ•°æ±‡æ€»è°ƒç”¨å‰äºŒè€…å¾—åˆ°å…¨éƒ¨åšå®¢æ–‡ç« æµè§ˆé‡çš„æ•°æ®ã€‚åœ¨ç»“å°¾ï¼Œ AI è¿˜æŒ‡å‡ºå¯¹äºç”¨ JavaScript åŠ¨æ€æ¸²æŸ“äº§ç”Ÿçš„é˜…è¯»æ¬¡æ•°ï¼Œéœ€è¦ä½¿ç”¨ <strong>Selenium</strong> ï¼ˆç”¨äºè‡ªåŠ¨æ‰§è¡Œç½‘ç»œæµè§ˆå™¨äº¤äº’çš„è½¯ä»¶åŒ…ï¼‰æ¨¡å—ï¼Œå¹¶é—®æ˜¯å¦è¦ç”Ÿæˆæ”¯æŒ JavaScript åŠ¨æ€ç½‘é¡µçš„ç‰ˆæœ¬ã€‚</p>
<p>å½“ç„¶è¦ï¼Œç»§ç»­ç»™ ChatGPT æç¤ºã€‚</p>
<div class="note info no-icon"><h4 id="æç¤ºyes"><strong>æç¤ºï¼š</strong>Yes</h4>
<p><strong>å›åº”ï¼š</strong>Hereâ€™s a JavaScript-rendered version of the crawler using Selenium with Python to extract view counts from www.packetmania.net. This handles sites where view counts are rendered dynamically via JavaScript.</p>
<p>âœ… <strong>Prerequisites</strong> Install the required Python packages:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure>
<p>Also install ChromeDriver:</p>
<ul>
<li>Download from: https://sites.google.com/chromium.org/driver/</li>
<li>Make sure it matches your version of Google Chrome and is in your system PATH.</li>
</ul>
<p>ğŸ•·ï¸ Crawler Code (with Selenium)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 1: Get post URLs from sitemap</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_post_urls</span>(<span class="params">sitemap_url</span>):</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Step 2: Use Selenium to render the page and extract view count</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_view_count</span>(<span class="params">driver, url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        time.sleep(<span class="number">2</span>)  <span class="comment"># wait for page to render</span></span><br><span class="line">        page_source = driver.page_source</span><br><span class="line">        match = re.search(<span class="string">r&#x27;Views:\s*(\d+)&#x27;</span>, page_source)</span><br><span class="line">        <span class="keyword">if</span> match:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">int</span>(match.group(<span class="number">1</span>))</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 3: Main function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_with_selenium</span>():</span></span><br><span class="line">    ...</span><br><span class="line">        <span class="comment"># Setup headless Chrome</span></span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--disable-gpu&quot;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--no-sandbox&quot;</span>)</span><br><span class="line"></span><br><span class="line">    driver = webdriver.Chrome(options=chrome_options)</span><br><span class="line">    results = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, url <span class="keyword">in</span> <span class="built_in">enumerate</span>(urls):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(urls)&#125;</span>] Crawling <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">        views = extract_view_count(driver, url)</span><br><span class="line">        ...</span><br><span class="line">     ...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ğŸ› ï¸ <strong>Tips</strong></p>
<ul>
<li>You can switch to Firefox by using webdriver.Firefox() if preferred.</li>
<li>To make it faster, reduce the wait time or optimize view count detection with XPath if you know the exact tag.</li>
<li>If you're running it in a server environment without GUI, ensure headless mode is enabled (as it is above).</li>
</ul>
<p>Would you like this version wrapped into a Docker container or saved as a ready-to-run script package?</p>
</div>
<p>æ–°çš„ç¨‹åºæ”¹ç”¨ Selenium æ¨¡å—æä¾›çš„å·¥å…·æŠ“å–é˜…è¯»æ¬¡æ•°ï¼Œè¾“å‡ºåŒæ ·åŒ…æ‹¬å®‰è£…æ–°æ¨¡å—çš„æ­¥éª¤ã€‚å¥½äº†ï¼Œç°åœ¨å¯ä»¥æµ‹è¯•ç¨‹åºäº†ã€‚</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œç¨‹åºä¸å·¥ä½œï¼ï¼</p>
<div class="note info no-icon"><h4 id="æç¤ºboth-python-scripts-returned-found-0-posts..-something-wrong."><strong>æç¤ºï¼š</strong>Both python scripts returned "Found 0 posts.". Something wrong.</h4>
<p><strong>å›åº”ï¼š</strong>It looks like I can't directly access the sitemap URL from my side. However, here's how you can troubleshoot it:</p>
<p>âœ… Step-by-Step Fix</p>
<ol type="1">
<li><strong>Open the Sitemap Manuallyï¼š</strong>Visit this URL in your browser https://www.packetmania.net/sitemap.xml</li>
</ol>
<ul>
<li>Do you see a list of blog post URLs?</li>
<li>If it returns a 404 or is empty, the site might not use a standard XML sitemap.</li>
</ul>
<ol start="2" type="1">
<li><strong>Alternative: Crawl the Blog Index Page:</strong>If the sitemap is missing or not useful, you can extract post URLs by crawling from the main blog page, like https://www.packetmania.net/en/.</li>
</ol>
<p>...</p>
<p>Let me know if the sitemap actually has content when you open it, or if you'd prefer the Selenium version of this updated crawler!</p>
</div>
<p>ChatGPT æ­£ç¡®åœ°è®¤è¯†åˆ°é—®é¢˜å‡ºåœ¨ç«™ç‚¹åœ°å›¾çš„åˆ†æéƒ¨åˆ†ï¼Œç¨‹åºæ‰¾ä¸åˆ°ä»»ä½•æ–‡ç« é“¾æ¥çš„ URLã€‚ä½†æ˜¯å®ƒä¸èƒ½ç›´æ¥è®¿é—®ç«™ç‚¹åœ°å›¾ï¼Œå»ºè®®æ‰‹å·¥æ£€æŸ¥ç«™ç‚¹åœ°å›¾å†…å®¹ã€‚é‚£å¥½ï¼Œæˆ‘å°±å–‚ç»™å®ƒ https://www.packetmania.net/sitemap.xml çš„å†…å®¹ã€‚</p>
<div class="note info no-icon"><h4 id="æç¤ºit-does-return-sitemap-content"><strong>æç¤ºï¼š</strong>It does return sitemap content:</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">urlset</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">loc</span>&gt;</span>https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/<span class="tag">&lt;/<span class="name">loc</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lastmod</span>&gt;</span>2025-03-29<span class="tag">&lt;/<span class="name">lastmod</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">changefreq</span>&gt;</span>monthly<span class="tag">&lt;/<span class="name">changefreq</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">priority</span>&gt;</span>0.6<span class="tag">&lt;/<span class="name">priority</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>å›åº”ï¼š</strong>Thanks! That helps a lot.</p>
<p>Your original sitemap does not contain /en/ in the URLs, so the filter if '/en/' in loc.text is incorrectly filtering everything out. Let's fix that. ... Here are the diff lines to fix the issue in your original script:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-    urls = [loc.text for loc in soup.find_all(&#x27;loc&#x27;) if &#x27;/en/&#x27; in loc.text]</span></span><br><span class="line"><span class="addition">+    urls = [loc.text for loc in soup.find_all(&#x27;loc&#x27;)]</span></span><br></pre></td></tr></table></figure>
<p>Thatâ€™s it! This change removes the unnecessary /en/ filter and allows the crawler to process all blog posts listed in the sitemap.</p>
</div>
<p>æ‹¿åˆ°ç«™ç‚¹åœ°å›¾å†…å®¹ï¼ŒAI ç«‹å³æ„è¯†åˆ°å®ƒçš„é”™è¯¯ã€‚åŸæ¥å®ƒåœ¨åˆ†æéƒ¨åˆ†çš„ä»£ç ä¸­åŠ å…¥äº†ä¸€ä¸ª<code>/en/</code>è¿‡æ»¤ï¼Œæ‰€ä»¥å…¨éƒ¨çš„ URL éƒ½è¢«æ’é™¤æ‰äº†ã€‚ä¼°è®¡è¿™æ˜¯å› ä¸ºæˆ‘ä¸€ç›´æ˜¯ç”¨è‹±æ–‡æç¤ºçš„ï¼Œè€Œç»™çš„ç½‘å€ç¡®å®åˆåŒ…å«ä¸€ä¸ªè‹±æ–‡å‰¯ç«™ç‚¹ www.packetmania.net/en/ï¼ŒAI å°±æƒ³å½“ç„¶åœ°åªåŒ¹é…è‹±æ–‡å‰¯ç«™ç‚¹çš„ URL äº†ã€‚AI ç»™å‡ºäº†è¡¥ä¸ï¼ˆdiffï¼‰ä¿®å¤äº†è¿™ä¸ªé”™è¯¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python crawler-javascript.py</span><br><span class="line">Found 61 posts.</span><br></pre></td></tr></table></figure>
<h3 id="æŠ“å–é˜…è¯»æ¬¡æ•°">æŠ“å–é˜…è¯»æ¬¡æ•°</h3>
<p>è™½ç„¶æ­¤æ—¶ ChatGPT ç”Ÿæˆçš„ç½‘ç»œçˆ¬è™«å¯ä»¥è¿”å›æ­£ç¡®çš„æ–‡ç« æ•°ç›®ï¼Œä½†æ˜¯å´ä¸èƒ½å–å‡ºé˜…è¯»é‡ï¼Œè¿˜éœ€è¦ç»§ç»­ä¸ä¹‹äº¤äº’ã€‚</p>
<div class="note info no-icon"><h4 id="æç¤ºnow-it-can-find-the-pages-but-the-view-count-still-missing"><strong>æç¤ºï¼š</strong>Now it can find the pages, but the view count still missing:</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[1/61] Crawling https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/</span><br><span class="line"> -&gt; View count not found.</span><br><span class="line">[2/61] Crawling https://www.packetmania.net/2025/02/16/Harvard-CS50-AI-intro/</span><br><span class="line"> -&gt; View count not found.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>å›åº”ï¼š</strong>Thanks â€” good progress! Now that URLs are loading, but no view count is found, itâ€™s very likely that:</p>
<ol type="1">
<li>The view count is rendered dynamically by JavaScript, or</li>
<li>It's inside a specific HTML tag, not just plain text like <code>Views: 123</code></li>
</ol>
<p>ğŸ” <strong>Letâ€™s Debug with Selenium</strong></p>
<p>Update your Selenium version to inspect specific elements, rather than relying on regex over raw HTML. Hereâ€™s a diff-style fix for the extract_view_count() function in your crawler-javascript.py:</p>
<p>...</p>
</div>
<p>è¿™æ—¶ä» AI çš„å›åº”ä¸­<code>2.</code>ï¼Œæˆ‘å‘ç°å®ƒç»™å‡ºçš„ç¨‹åºä¸­è¿˜æœ‰åŒæ ·çš„é”™è¯¯ï¼šé˜…è¯»æ¬¡æ•°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰åŒ¹é…ç”¨çš„æ˜¯è‹±æ–‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match = re.search(<span class="string">r&#x27;Views:\s*(\d+)&#x27;</span>, page_source)</span><br></pre></td></tr></table></figure>
<p>è€Œå®é™…çš„å­—ç¬¦æ˜¯<code>é˜…è¯»æ¬¡æ•°ï¼š 1448</code>ã€‚ä¸‹é¢è®©å®ƒçº æ­£è¿™ä¸ªé”™è¯¯</p>
<div class="note info no-icon"><h4 id="æç¤ºactually-the-view-count-is-shown-as-é˜…è¯»æ¬¡æ•°-1448"><strong>æç¤ºï¼š</strong>Actually the view count is shown as "é˜…è¯»æ¬¡æ•°ï¼š 1448"</h4>
<p><strong>å›åº”ï¼š</strong>Ah, perfect! The view count is shown in Chinese as: <code>é˜…è¯»æ¬¡æ•°ï¼š1448</code>ã€‚</p>
<p>Letâ€™s update your Selenium-based crawler to search for this instead.</p>
<p>âœ… <strong>Just update this part in extract_view_count():</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-        elements = driver.find_elements(By.XPATH, &quot;//*[contains(text(), &#x27;Views&#x27;)]&quot;)</span></span><br><span class="line"><span class="addition">+        elements = driver.find_elements(By.XPATH, &quot;//*[contains(text(), &#x27;é˜…è¯»æ¬¡æ•°&#x27;)]&quot;)</span></span><br></pre></td></tr></table></figure>
<p>And update the regex:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-            match = re.search(r&#x27;Views:\s*(\d+)&#x27;, el.text)</span></span><br><span class="line"><span class="addition">+            match = re.search(r&#x27;é˜…è¯»æ¬¡æ•°[:ï¼š]?\s*(\d+)&#x27;, el.text)</span></span><br></pre></td></tr></table></figure>
<p>... That should now correctly extract the Chinese-format view count from each blog post.</p>
</div>
<p>æŒ‰ç…§è¿™ä¸¤ä¸ª Diff ä¿®æ”¹åï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰“å°å‡ºé˜…è¯»æ¬¡æ•°ã€‚ç»§ç»­è®©å®ƒæ’é”™</p>
<div class="note info no-icon"><h4 id="æç¤ºstill-not-found"><strong>æç¤ºï¼š</strong>Still not found</h4>
<p><strong>å›åº”ï¼š</strong>Got it â€” since itâ€™s still not found, letâ€™s do a precise visual + DOM-based inspection. Weâ€™ll now:</p>
<ol type="1">
<li>Use Selenium to print out all elements containing "é˜…è¯»æ¬¡æ•°".</li>
<li>Confirm the exact tag/structure where the view count lives.</li>
</ol>
<p>âœ… <strong>Debugging Version of extract_view_count()</strong></p>
<p>Replace your current function with this debug version:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_view_count</span>(<span class="params">driver, url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        time.sleep(<span class="number">2</span>)  <span class="comment"># Let JS render</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Print out all elements that contain &quot;é˜…è¯»æ¬¡æ•°&quot;</span></span><br><span class="line">        elements = driver.find_elements(By.XPATH, <span class="string">&quot;//*[contains(text(), &#x27;é˜…è¯»æ¬¡æ•°&#x27;)]&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> el <span class="keyword">in</span> elements:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Found text:&quot;</span>, el.text)  <span class="comment"># Debug output</span></span><br><span class="line">            match = re.search(<span class="string">r&#x27;é˜…è¯»æ¬¡æ•°[:ï¼š]?\s*(\d+)&#x27;</span>, el.text)</span><br><span class="line">            <span class="keyword">if</span> match:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">int</span>(match.group(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Optional: print page source if nothing is found</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> elements:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;No element with &#x27;é˜…è¯»æ¬¡æ•°&#x27; found.&quot;</span>)</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;debug_output.html&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(driver.page_source)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error processing <span class="subst">&#123;url&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<p><strong>What This Does:</strong></p>
<ul>
<li>âœ… Shows every el.text containing "é˜…è¯»æ¬¡æ•°"</li>
<li>ğŸ“„ Dumps HTML to debug_output.html if nothing is found</li>
<li>Helps us see <strong>how itâ€™s rendered</strong> and where</li>
</ul>
<p>ğŸ§  <strong>Next Step</strong></p>
<ol type="1">
<li>Run the script.</li>
<li>Look at Found text: ... output â€” does it show the view count?</li>
<li>If not, open debug_output.html and search for é˜…è¯»æ¬¡æ•° â€” is it inside a &lt;script&gt;, inside Shadow DOM, or rendered with JavaScript framework?</li>
</ol>
<p>Once you show me the actual line or structure from the HTML, I can give you the exact XPath to extract it. Want to do that now?</p>
</div>
<p>å†æ¬¡è¿è¡Œä¿®æ”¹<code>extract_view_count</code>å‡½æ•°åçš„ç¨‹åºï¼Œè¿™ä¸€æ¬¡è¾“å‡ºäº†<code>é˜…è¯»æ¬¡æ•°ï¼š</code>ï¼Œä½†æ˜¯ä»ç„¶æ²¡æœ‰æŠ“åˆ°æ•°å­—ã€‚ç»§ç»­æç¤º</p>
<div class="note info no-icon"><h4 id="æç¤ºhere-is-the-output"><strong>æç¤ºï¼š</strong>Here is the output:</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python crawler-javascript.py</span><br><span class="line">Found 61 posts.</span><br><span class="line">	</span><br><span class="line">[1/61] Crawling https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/</span><br><span class="line">Found text: é˜…è¯»æ¬¡æ•°ï¼š</span><br><span class="line"> -&gt; View count not found.</span><br><span class="line">[2/61] Crawling https://www.packetmania.net/2025/02/16/Harvard-CS50-AI-intro/</span><br><span class="line">Found text: é˜…è¯»æ¬¡æ•°ï¼š</span><br><span class="line"> -&gt; View count not found.</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure>
<p><strong>å›åº”ï¼š</strong>Perfect, now we know:</p>
<ul>
<li>The element does exist</li>
<li>But it only contains: é˜…è¯»æ¬¡æ•°ï¼š (no number inside the same element)</li>
</ul>
<p>That strongly suggests the <strong>number is in a <em>separate span or sibling tag</em></strong> next to the "é˜…è¯»æ¬¡æ•°ï¼š" label.</p>
<p>âœ… <strong>Fix with More Precise XPath</strong></p>
<p>Update the XPath to capture the <strong>label + number</strong> in one go:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elements = driver.find_elements(By.XPATH, <span class="string">&quot;//*[contains(text(), &#x27;é˜…è¯»æ¬¡æ•°&#x27;)]/..&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>...</p>
</div>
<p>AI çŸ¥é“äº†é—®é¢˜æ‰€åœ¨ï¼Œå¹¶æŒ‡å‡ºäº†è§£å†³åŠæ³•ã€‚æ”¹åŠ¨ç¨‹åºåï¼Œé˜…è¯»æ¬¡æ•°å‡ºæ¥äº†ï¼èµ¶ç´§å‘Šè¯‰ AI</p>
<div class="note info no-icon"><h4 id="æç¤ºnow-it-works"><strong>æç¤ºï¼š</strong>Now it works:</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python crawler-javascript.py</span><br><span class="line">Found 61 posts.</span><br><span class="line"></span><br><span class="line">[1/61] Crawling https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/</span><br><span class="line">Found text: é˜…è¯»æ¬¡æ•°ï¼š 41</span><br><span class="line"> -&gt; Views: 41</span><br><span class="line">[2/61] Crawling https://www.packetmania.net/2025/02/16/Harvard-CS50-AI-intro/</span><br><span class="line">Found text: é˜…è¯»æ¬¡æ•°ï¼š 276</span><br><span class="line"> -&gt; Views: 276</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<p><strong>å›åº”ï¼š</strong>ğŸ‰ Awesome! Glad itâ€™s working now â€” great teamwork!</p>
<p>Now that you're successfully extracting view counts, here are a few bonus suggestions you might want next:</p>
<p>ğŸ“¤ <strong>Export Options</strong></p>
<ol type="1">
<li>To CSV:</li>
<li>To JSON: ...</li>
</ol>
<p>ğŸ› ï¸ <strong>Optional Enhancements</strong></p>
<ul>
<li>Add --headful mode for debugging (show browser window)</li>
<li>Randomized delay between requests (to avoid rate limits)</li>
<li>Log failed pages for retrying</li>
<li>Schedule regular crawling with cron or APScheduler</li>
<li>Wrap it into a Docker container or Flask API</li>
</ul>
<p>Want help with any of these next steps?</p>
</div>
<p>ChatGPT ä¹Ÿå¾ˆé«˜å…´ğŸ˜Šï¼Œå®ƒè¿˜è¿›ä¸€æ­¥ç»™å‡ºäº†æ•°æ®å¯¼å‡ºå’Œå¢å¼ºåŠŸèƒ½ä¸€äº›å»ºè®®ï¼Œä½†æ˜¯æˆ‘æœ‰è‡ªå·±çš„ä¸»æ„ã€‚</p>
<h3 id="åˆ›å»ºæ–‡ç« æ’è¡Œæ¦œ">åˆ›å»ºæ–‡ç« æ’è¡Œæ¦œ</h3>
<p>æç¤º AI ç»§ç»­å®Œæˆä¸€äº›æ”¹è¿›ï¼š</p>
<ul>
<li>"Now please enhance this script to skip URLs that are not including &lt;year&gt;/&lt;month&gt;/&lt;day&gt;."</li>
<li>"Can you also do more enhancements:
<ol type="1">
<li>Grab the title of each blog post</li>
<li>Sort with the decreasing order of view count with titles list to the right.</li>
</ol></li>
</ul>
<p>ChatGPT è¿…é€Ÿç”Ÿæˆäº†ç›¸åº”çš„ä»£ç ï¼Œæ²¡æœ‰é”™è¯¯ã€‚</p>
<div class="note info no-icon"><p><strong>å›åº”ï¼š</strong>Great! Letâ€™s enhance the script so it <strong>only crawls URLs that match the pattern:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.packetmania.net/YYYY/MM/DD/some-slug/</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>Code Diff</strong></p>
<p>Apply this small filter inside your get_post_urls() function:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def get_post_urls(sitemap_url):</span><br><span class="line">    response = requests.get(sitemap_url, headers=headers)</span><br><span class="line">    soup = BeautifulSoup(response.content, &#x27;xml&#x27;)</span><br><span class="line"><span class="deletion">-    urls = [loc.text for loc in soup.find_all(&#x27;loc&#x27;)]</span></span><br><span class="line"><span class="addition">+    urls = [</span></span><br><span class="line"><span class="addition">+        loc.text for loc in soup.find_all(&#x27;loc&#x27;)</span></span><br><span class="line"><span class="addition">+        if re.search(r&#x27;/\d&#123;4&#125;/\d&#123;2&#125;/\d&#123;2&#125;/&#x27;, loc.text)</span></span><br><span class="line"><span class="addition">+    ]</span></span><br><span class="line">    return urls</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>Explanation</strong></p>
<ul>
<li>The regex <code>r'/\d{4}/\d{2}/\d{2}/'</code> ensures the URL includes a valid date path (YYYY/MM/DD)</li>
<li>This skips entries like index.html or archive pages</li>
</ul>
<p>âœ… <strong>New Features:</strong></p>
<ul>
<li>Grab the blog post title</li>
<li>Sort results by descending view count</li>
<li>Output CSV with: <code>URL, Views, Title</code> (sorted)</li>
</ul>
<p>ğŸ” <strong>Code Changes</strong></p>
<p>ğŸ“Œ 1. Update extract_view_count() to also return title</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_view_count</span>(<span class="params">driver, url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        title = driver.title.strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Find parent element that includes view count</span></span><br><span class="line">        elements = driver.find_elements(By.XPATH, <span class="string">&quot;//*[contains(text(), &#x27;é˜…è¯»æ¬¡æ•°&#x27;)]/..&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> el <span class="keyword">in</span> elements:</span><br><span class="line">            full_text = el.text</span><br><span class="line">            match = re.search(<span class="string">r&#x27;é˜…è¯»æ¬¡æ•°[:ï¼š]?\s*(\d+)&#x27;</span>, full_text)</span><br><span class="line">            <span class="keyword">if</span> match:</span><br><span class="line">                views = <span class="built_in">int</span>(match.group(<span class="number">1</span>))</span><br><span class="line">                <span class="keyword">return</span> views, title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error processing <span class="subst">&#123;url&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span>, <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ 2. Main crawl function with sorting and CSV output</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_packetmania</span>():</span></span><br><span class="line">    post_urls = get_post_urls(SITEMAP_URL)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Found <span class="subst">&#123;<span class="built_in">len</span>(post_urls)&#125;</span> posts.\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    results = []</span><br><span class="line">    <span class="keyword">for</span> i, url <span class="keyword">in</span> <span class="built_in">enumerate</span>(post_urls):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(post_urls)&#125;</span>] Crawling <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">        views, title = extract_view_count(driver, url)</span><br><span class="line">        <span class="keyword">if</span> views <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot; -&gt; Views: <span class="subst">&#123;views&#125;</span> | Title: <span class="subst">&#123;title&#125;</span>&quot;</span>)</span><br><span class="line">            results.append((url, views, title))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot; -&gt; View count not found.&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sort by views descending</span></span><br><span class="line">    results.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sort by views descending</span></span><br><span class="line">    results.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Save to CSV</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;packetmania_sorted_views.csv&quot;</span>, <span class="string">&quot;w&quot;</span>, newline=<span class="string">&#x27;&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        writer = csv.writer(f)</span><br><span class="line">        writer.writerow([<span class="string">&quot;URL&quot;</span>, <span class="string">&quot;Views&quot;</span>, <span class="string">&quot;Title&quot;</span>])</span><br><span class="line">        writer.writerows(results)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
</div>
<p>è¿è¡Œç¨‹åºåéªŒè¯è¿™äº›ä»£ç æ”¹åŠ¨éƒ½æ²¡æœ‰é—®é¢˜ï¼Œæ»¡è¶³æç¤ºçš„è¦æ±‚ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œ ChatGPT è‡ªä½œä¸»å¼ å¯¼å‡º CSV æ ¼å¼çš„æ–‡ä»¶ï¼Œä¼°è®¡å› ä¸ºè¿™æ˜¯å¸¸è§çš„è¾“å‡ºæ ¼å¼ã€‚è€Œå…¶å®æˆ‘æƒ³è¦çš„ï¼Œæ˜¯å¯ä»¥ç›´æ¥ç”¨äºç”Ÿæˆåšå®¢ç½‘ç«™å¸–å­çš„ Markdown æ ¼å¼æ–‡ä»¶ã€‚</p>
<h3 id="ä¿å­˜markdown">ä¿å­˜Markdown</h3>
<p>æ¥ä¸‹æ¥æç¤º AI å¯¼å‡º Markdown æ ¼å¼æ–‡ä»¶ï¼š</p>
<ul>
<li>â€œPlease generate a markdown table format with the sorted listâ€</li>
<li>â€œPlease add the link to the Title in the table.â€</li>
<li>â€œCan you add a far left column with the order from 1 to the last number of posts.â€</li>
<li>â€œFor the title, please strip out the ending "&lt;space&gt;*|*".â€</li>
</ul>
<div class="note info no-icon"><p><strong>å›åº”ï¼š</strong></p>
<p>Sure! Here's how to output the sorted results as a <strong>Markdown table</strong> (<code>| URL | Views | Title |</code>) directly from your Python script.</p>
<p>âœ… <strong>Step: Add This to the End of </strong><code>crawl_packetmania()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate Markdown table</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;packetmania_views.md&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&quot;| Views | Title |\n&quot;</span>)</span><br><span class="line">    f.write(<span class="string">&quot;|-------:|-------|\n&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> url, views, title <span class="keyword">in</span> results:</span><br><span class="line">        safe_title = title.replace(<span class="string">&quot;|&quot;</span>, <span class="string">&quot;-&quot;</span>)  <span class="comment"># prevent Markdown formatting issues</span></span><br><span class="line">        f.write(<span class="string">f&quot;| <span class="subst">&#123;views&#125;</span> | [<span class="subst">&#123;safe_title&#125;</span>](<span class="subst">&#123;url&#125;</span>) |\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ <strong>Sample Output</strong></p>
<p>This will produce something like:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| Views | Title |</span><br><span class="line">|-------:|-------|</span><br><span class="line">| 276 | [<span class="string">Harvard CS50 AI Intro</span>](<span class="link">https://www.packetmania.net/2025/02/16/Harvard-CS50-AI-intro/</span>) |</span><br><span class="line">| 41 | [<span class="string">PGITVW Part 4 - Two Pointers</span>](<span class="link">https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/</span>) |</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>Final Markdown Export Code (with Rank Column)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate Markdown table with rank, views, and linked titles</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;packetmania_views.md&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&quot;| # | Views | Title |\n&quot;</span>)</span><br><span class="line">    f.write(<span class="string">&quot;|--:|------:|-------|\n&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> idx, (url, views, title) <span class="keyword">in</span> <span class="built_in">enumerate</span>(results, <span class="number">1</span>):</span><br><span class="line">        safe_title = title.replace(<span class="string">&quot;|&quot;</span>, <span class="string">&quot;-&quot;</span>)  <span class="comment"># avoid breaking the table</span></span><br><span class="line">        f.write(<span class="string">f&quot;| <span class="subst">&#123;idx&#125;</span> | <span class="subst">&#123;views&#125;</span> | [<span class="subst">&#123;safe_title&#125;</span>](<span class="subst">&#123;url&#125;</span>) |\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ <strong>Output Example</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| # | Views | Title |</span><br><span class="line">|--:|------:|-------|</span><br><span class="line">| 1 | 276 | [<span class="string">Harvard CS50 AI Intro</span>](<span class="link">https://www.packetmania.net/2025/02/16/Harvard-CS50-AI-intro/</span>) |</span><br><span class="line">| 2 | 41 | [<span class="string">PGITVW Part 4 - Two Pointers</span>](<span class="link">https://www.packetmania.net/2025/03/09/PGITVW-4-twoptrs/</span>) |</span><br><span class="line">| 3 | 28 | [<span class="string">Cisco WiFi6 MU-MIMO</span>](<span class="link">https://www.packetmania.net/2021/06/05/Cisco-WiFi6-MuMIMO/</span>) |</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>Fix: Strip trailing " | ..." from the title</strong></p>
<p>Update the title cleaning line inside <code>extract_view_count()</code> like this:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- title = driver.title.strip()</span></span><br><span class="line"><span class="addition">+ title = re.sub(r&#x27;\s*\|\s*.*$&#x27;, &#x27;&#x27;, driver.title.strip())</span></span><br></pre></td></tr></table></figure>
</div>
<p>ChatGPT å®Œæˆè¿™äº›ä»»åŠ¡æ²¡æœ‰ä¸€ç‚¹å‹åŠ›ï¼Œç”Ÿæˆçš„ç¨‹åºæ²¡æœ‰é—®é¢˜ã€‚</p>
<h3 id="æ”¯æŒåŒè¯­åšå®¢">æ”¯æŒåŒè¯­åšå®¢</h3>
<p>æœ€åè®© AI åœ¨ä¸€ä¸ªç¨‹åºé‡Œæ”¯æŒæœ¬åšå®¢çš„ä¸­è‹±æ–‡ç½‘ç«™ï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œé€‰é¡¹<code>--lang</code>æŒ‡å®šã€‚ChatGPT ä¹Ÿå¾ˆå¿«æå®šäº†ã€‚</p>
<ul>
<li>"Add a command line option to generate Chinese output of the table md."</li>
<li>â€œplease add timestamp to the name of generated md file. Also for command line option --lang, use different URL for English or Chinese: Default: Chinese (zh) URL: www.packetmania.net, --lang en URL: www.packetmania.net/en"</li>
<li>"The matching keyword for English would be "Views: "."</li>
<li>"Please also add en or zh to the name of generated md file."</li>
<li>"for the keyword, note the difference of ":" for English and â€œï¼šâ€ for Chinese."</li>
<li>For the markdown file name timestamp part, please add the time to the seconds.</li>
</ul>
<div class="note info no-icon"><p><strong>å›åº”ï¼š</strong></p>
<p>âœ… <strong>Step-by-Step Enhancements</strong></p>
<ol type="1">
<li>Use <code>argparse</code> to add a <code>--lang</code> option</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&quot;PacketMania view count crawler&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--lang&quot;</span>, choices=[<span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>], default=<span class="string">&quot;en&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Language for Markdown output (en or zh)&quot;</span>)</span><br><span class="line">args = parser.parse_args()</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>Use language-specific headers</li>
</ol>
<p>Update your Markdown export section:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate Markdown table with rank, views, and linked titles</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;packetmania_views.md&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">if</span> args.lang == <span class="string">&quot;zh&quot;</span>:</span><br><span class="line">        f.write(<span class="string">&quot;| æ’å | é˜…è¯»æ¬¡æ•° | æ ‡é¢˜ |\n&quot;</span>)</span><br><span class="line">        f.write(<span class="string">&quot;|-----:|----------:|------|\n&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        f.write(<span class="string">&quot;| # | Views | Title |\n&quot;</span>)</span><br><span class="line">        f.write(<span class="string">&quot;|--:|------:|-------|\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> idx, (url, views, title) <span class="keyword">in</span> <span class="built_in">enumerate</span>(results, <span class="number">1</span>):</span><br><span class="line">        safe_title = title.replace(<span class="string">&quot;|&quot;</span>, <span class="string">&quot;-&quot;</span>)  <span class="comment"># prevent MD issues</span></span><br><span class="line">        f.write(<span class="string">f&quot;| <span class="subst">&#123;idx&#125;</span> | <span class="subst">&#123;views&#125;</span> | [<span class="subst">&#123;safe_title&#125;</span>](<span class="subst">&#123;url&#125;</span>) |\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>How to Use It</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python crawler-javascript.py --lang zh   <span class="comment"># Chinese headers</span></span><br><span class="line">python crawler-javascript.py --lang en   <span class="comment"># English headers (default)</span></span><br></pre></td></tr></table></figure>
<p>ğŸ•·ï¸ <strong>Final Enhanced</strong><code>crawler-javascript.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"> ...</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">crawl_packetmania</span>(<span class="params">lang=<span class="string">&quot;zh&quot;</span></span>):</span></span><br><span class="line">    base_url = <span class="string">&quot;https://www.packetmania.net&quot;</span> <span class="keyword">if</span> lang == <span class="string">&quot;zh&quot;</span> <span class="keyword">else</span> <span class="string">&quot;https://www.packetmania.net/en&quot;</span></span><br><span class="line">    sitemap_url = <span class="string">f&quot;<span class="subst">&#123;base_url&#125;</span>/sitemap.xml&quot;</span></span><br><span class="line">    keyword = <span class="string">&quot;é˜…è¯»æ¬¡æ•°&quot;</span> <span class="keyword">if</span> lang == <span class="string">&quot;zh&quot;</span> <span class="keyword">else</span> <span class="string">&quot;Views&quot;</span></span><br><span class="line"></span><br><span class="line">    post_urls = get_post_urls(sitemap_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Found <span class="subst">&#123;<span class="built_in">len</span>(post_urls)&#125;</span> posts.\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Setup headless Chrome</span></span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--disable-gpu&quot;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;--no-sandbox&quot;</span>)</span><br><span class="line">    driver = webdriver.Chrome(options=chrome_options)</span><br><span class="line"></span><br><span class="line">    results = []</span><br><span class="line">    <span class="keyword">for</span> i, url <span class="keyword">in</span> <span class="built_in">enumerate</span>(post_urls):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(post_urls)&#125;</span>] Crawling <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">        views, title = extract_view_count(driver, url, keyword)</span><br><span class="line">        <span class="keyword">if</span> views <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot; -&gt; Views: <span class="subst">&#123;views&#125;</span> | Title: <span class="subst">&#123;title&#125;</span>&quot;</span>)</span><br><span class="line">            results.append((url, views, title))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot; -&gt; View count not found.&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    driver.quit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sort by view count descending</span></span><br><span class="line">    results.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Generate timestamped Markdown filename</span></span><br><span class="line">    timestamp = datetime.datetime.now().strftime(<span class="string">&quot;%Y%m%d&quot;</span>)</span><br><span class="line">    md_filename = <span class="string">f&quot;packetmania_views_<span class="subst">&#123;timestamp&#125;</span>_<span class="subst">&#123;lang&#125;</span>.md&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Output Markdown table</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md_filename, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">if</span> lang == <span class="string">&quot;zh&quot;</span>:</span><br><span class="line">            f.write(<span class="string">&quot;| æ’å | é˜…è¯»æ¬¡æ•° | æ ‡é¢˜ |\n&quot;</span>)</span><br><span class="line">            f.write(<span class="string">&quot;|-----:|----------:|------|\n&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            f.write(<span class="string">&quot;| # | Views | Title |\n&quot;</span>)</span><br><span class="line">            f.write(<span class="string">&quot;|--:|------:|-------|\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> idx, (url, views, title) <span class="keyword">in</span> <span class="built_in">enumerate</span>(results, <span class="number">1</span>):</span><br><span class="line">            safe_title = title.replace(<span class="string">&quot;|&quot;</span>, <span class="string">&quot;-&quot;</span>)</span><br><span class="line">            f.write(<span class="string">f&quot;| <span class="subst">&#123;idx&#125;</span> | <span class="subst">&#123;views&#125;</span> | [<span class="subst">&#123;safe_title&#125;</span>](<span class="subst">&#123;url&#125;</span>) |\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\nâœ… Markdown table written to `<span class="subst">&#123;md_filename&#125;</span>`&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<p>Excellent observation! The colon character differs between English and Chinese:</p>
<ul>
<li>English: : (ASCII colon)</li>
<li>Chinese: ï¼š (full-width colon U+FF1A)</li>
</ul>
<p>To ensure precise matching, we should:</p>
<ul>
<li>Use Views: (with ASCII colon) for English</li>
<li>Use é˜…è¯»æ¬¡æ•°ï¼š (with Chinese full-width colon) for Chinese</li>
</ul>
<p>âœ… <strong>Updated Keyword Handling</strong></p>
<p>Update the <code>keyword</code> logic in <code>crawl_packetmania()</code>:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- keyword = &quot;é˜…è¯»æ¬¡æ•°&quot; if lang == &quot;zh&quot; else &quot;Views&quot;</span></span><br><span class="line"><span class="addition">+ keyword = &quot;é˜…è¯»æ¬¡æ•°ï¼š&quot; if lang == &quot;zh&quot; else &quot;Views:&quot;</span></span><br></pre></td></tr></table></figure>
<p>And remove the regex fallback colon match (<code>[:ï¼š]?</code>) â€” it's no longer needed.</p>
<p>ğŸ§ª <strong>Usage</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python crawler-javascript.py             <span class="comment"># ä¸­æ–‡è¾“å‡ºï¼Œé»˜è®¤ç«™ç‚¹</span></span><br><span class="line">python crawler-javascript.py --lang en   <span class="comment"># English output, &quot;/en&quot; URLs</span></span><br></pre></td></tr></table></figure>
<p>This will generate a file like <code>packetmania_views_20250409_zh.md</code>.</p>
<p>Great idea! Adding timestamp down to seconds will ensure uniqueness and precision.</p>
<p>âœ… <strong>Change the Timestamp Format</strong></p>
<p>Update this line:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- timestamp = datetime.datetime.now().strftime(&quot;%Y%m%d&quot;)</span></span><br><span class="line"><span class="addition">+ timestamp = datetime.datetime.now().strftime(&quot;%Y%m%d_%H%M%S&quot;)</span></span><br></pre></td></tr></table></figure>
<p>ğŸ§© <strong>Updated Snippet for Markdown Filename</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate filename with timestamp to the second</span></span><br><span class="line">timestamp = datetime.datetime.now().strftime(<span class="string">&quot;%Y%m%d_%H%M%S&quot;</span>)</span><br><span class="line">md_filename = <span class="string">f&quot;packetmania_views_<span class="subst">&#123;timestamp&#125;</span>_<span class="subst">&#123;lang&#125;</span>.md&quot;</span></span><br></pre></td></tr></table></figure>
<p>This will produce filenames like <code>packetmania_views_20250409_153244_zh.md</code>.</p>
</div>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>AI ç”Ÿæˆçš„ å®Œæ•´çš„ Python çˆ¬è™«ç¨‹åºæ˜¯ <a href="crawler-javascript.py">crawler-javascript.py</a>ã€‚æœ€åè®© ChatGPT è‡ªå·±åšä¸ªæ€»ç»“ï¼š</p>
<div class="note info no-icon"><p><strong>å›åº”ï¼š</strong>Hereâ€™s the complete updated crawler script with the following features:</p>
<p>âœ… Crawls blog posts from PacketMania<br />
âœ… Uses Selenium to extract dynamically rendered view counts<br />
âœ… Extracts post titles<br />
âœ… Filters URLs to only those matching <code>/YYYY/MM/DD/</code><br />
âœ… Sorts by view count in descending order<br />
âœ… Outputs a Markdown table with optional <code>--lang zh</code> for Chinese headers<br />
âœ… Markdown file named with timestamp to second<br />
âœ… Command line option for dual languages with language-specific base URL and view count match:</p>
<ul>
<li>zh (default): <code>https://www.packetmania.net</code>, <code>é˜…è¯»æ¬¡æ•°ï¼š</code></li>
<li>en: <code>https://www.packetmania.net/en</code>, <code>Views:</code></li>
</ul>
</div>
<p>çˆ¬è™«çš„è¾“å‡ºç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â¯ cat packetmania_views_20250415_165701_zh.md</span><br><span class="line">| æ’å | é˜…è¯»æ¬¡æ•° | æ ‡é¢˜ |</span><br><span class="line">|-----:|----------:|------|</span><br><span class="line">| 1 | 11464 | [iTerm2 + Oh-My-Zsh + Powerlevel10k æ‰“é€ é…·ç‚«macOSç»ˆç«¯](https://www.packetmania.net/2021/11/13/iTerm2-OMZ-Powerlevel10k/) |</span><br><span class="line">| 2 | 8220 | [è‡ªå·±åŠ¨æ‰‹ä½¿ç”¨æ ‘è“æ´¾æ­å»ºå®¶ç”¨NASå’Œæµåª’ä½“æœåŠ¡å™¨](https://www.packetmania.net/2021/12/19/RPi-NAS-Plex/) |</span><br><span class="line">| 3 | 6631 | [IPv6åŠ¨æ€åœ°å€åˆ†é…æœºåˆ¶è¯¦è§£](https://www.packetmania.net/2020/12/01/IPv6-Addressing/) |</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¯¼å‡ºçš„ Markdown æ–‡ä»¶å¯ç›´æ¥ç”± Hexo åšå®¢æ¡†æ¶ + Next ä¸»é¢˜è½¬åŒ–æˆ<a href="https://www.packetmania.net/ranking/">æ–‡ç« æ’è¡Œæ¦œ</a>ç½‘é¡µï¼Œå…¶é“¾æ¥ä¹ŸåŠ å…¥åˆ°åšå®¢çš„å·¦ä¾§èœå•ä¸­ã€‚</p>
<p>è™½ç„¶å¯¹ç½‘ç»œçˆ¬è™«å’Œç½‘é¡µæœåŠ¡çš„æŠ€æœ¯ç»†èŠ‚äº†è§£çš„ä¸å¤šï¼Œä½†æ˜¯æœ‰äº† Python ç¼–ç¨‹åŸºç¡€å¹¶é€šè¿‡ä¸ ChatGPT äº¤äº’æœ€ç»ˆé¡ºåˆ©è¾¾åˆ°äº†ç›®æ ‡ ã€‚è¿™æ˜¯ä¸€æ¬¡å€ŸåŠ© AI å®ç°ä¸€ä¸ªç®€å•çš„ç½‘ç»œçˆ¬è™«çš„æˆåŠŸç»éªŒï¼</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>è¯·æˆ‘å–æ¯å’–å•¡</div>
  <button>
    èµèµ
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="å­æ›¦ å¾®ä¿¡">
        <span>å¾®ä¿¡</span>
      </div>
      <div>
        <img src="/images/paypal.jpg" alt="å­æ›¦ PayPal">
        <span>PayPal</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>å­æ›¦
  </li>
  <li class="post-copyright-link">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/" title="AIè¾…åŠ©ç”Ÿæˆçš„ç»Ÿè®¡åšå®¢æ–‡ç« æµè§ˆé‡çš„ç½‘ç»œçˆ¬è™«">https://www.packetmania.net/2025/05/04/Web-Crawler-Viewcounts/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-ND</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Python%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-tag"></i> Pythonç¼–ç¨‹</a>
              <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%92%8C%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ </a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/04/19/PGITVW-5-primes/" rel="prev" title="ç¨‹åºå‘˜é¢è¯•é¢˜ç²¾è§£ï¼ˆ5ï¼‰â€” ç´ æ•°åˆ¤å®š">
                  <i class="fa fa-chevron-left"></i> ç¨‹åºå‘˜é¢è¯•é¢˜ç²¾è§£ï¼ˆ5ï¼‰â€” ç´ æ•°åˆ¤å®š
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-gitalk">Gitalkè¯„è®º</a></li>
            <li class="tab"><a href="#comment-utterances">Utterancesè¯„è®º</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments gitalk-container"></div>
            </div>
            <div class="tab-pane utterances" id="comment-utterances">
              <div class="comments utterances-container"></div>
            </div>
        </div>
      </div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å­æ›¦</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">355k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">5:22</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5fc1fd29017282c7" async="async"></script>
  </div>
  <div class="powered-by">
<span>æœ¬ç«™å·²è¿è¡Œ<span id="showDays"></span></span>
<script>
  var seconds = 1000;
  var minutes = seconds * 60;
  var hours = minutes * 60;
  var days = hours * 24;
  var years = days * 365;
  var birthDay = Date.UTC(2020,11,25,14,00,00); // è¿™é‡Œè®¾ç½®å»ºç«™æ—¶é—´
  setInterval(function() {
    var today = new Date();
    var todayYear = today.getFullYear();
    var todayMonth = today.getMonth()+1;
    var todayDate = today.getDate();
    var todayHour = today.getHours();
    var todayMinute = today.getMinutes();
    var todaySecond = today.getSeconds();
    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
    var diff = now - birthDay;
    var diffYears = Math.floor(diff/years);
    var diffDays = Math.floor((diff/days)-diffYears*365);
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById('showDays').innerHTML=""+diffYears+"å¹´"+diffDays+"å¤©"+diffHours+"å°æ—¶"+diffMinutes+"åˆ†é’Ÿ"+diffSeconds+"ç§’";
  }, 1000);
</script>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"forest","dark":"forest"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.13.3/dist/mermaid.min.js","integrity":"sha256-blHXaX2RMvNwEOnrYOl/6/RKqNi97Ig3o6Ae3bhXPvM="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>


  
  <script defer src="https://vercount.one/js"></script>
  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"packetmania","repo":"packetmania.github.io","client_id":"a45f6ae3f97c1a467856","client_secret":"7d81b74f952b388f93dcb5a8c44cd12f657969fa","admin_user":"packetmania","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"e31cc480253f79f1d03ab23e5445c9c3"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>
<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"packetmania/packetmania.github.io","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
